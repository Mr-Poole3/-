# 第五课作业复现及笔记

## 环境部署

### 安装环境

```python
studio-conda -t lmdeploy -o pytorch-2.1.2
```

![image-20240422223620347](C:\Users\28402\AppData\Roaming\Typora\typora-user-images\image-20240422223620347.png)

![image-20240422224907088](C:\Users\28402\AppData\Roaming\Typora\typora-user-images\image-20240422224907088.png)

### 安装0.3版本的lmdeploy。

![image-20240422225342721](C:\Users\28402\AppData\Roaming\Typora\typora-user-images\image-20240422225342721.png)

### 新建pipeline_transformer.py文件

![image-20240422230448224](C:\Users\28402\AppData\Roaming\Typora\typora-user-images\image-20240422230448224.png)

### 测试模型

![image-20240422230708545](C:\Users\28402\AppData\Roaming\Typora\typora-user-images\image-20240422230708545.png)

![image-20240422231123652](C:\Users\28402\AppData\Roaming\Typora\typora-user-images\image-20240422231123652.png)

可以看出，这个推理也是占用了巨大内存

## 使用LMDeploy与模型对话

![image-20240422231859066](C:\Users\28402\AppData\Roaming\Typora\typora-user-images\image-20240422231859066.png)

### 以命令行方式与InternLM2-Chat-1.8B大模型对话

![image-20240422232857184](C:\Users\28402\AppData\Roaming\Typora\typora-user-images\image-20240422232857184.png)

## 笔记

